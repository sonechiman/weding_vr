<html lang="ja">

<head>
    <meta charset="utf-8">
    <title>Happy Wedding Takahiro and Rina!</title>
    <script src="js/bundle.min.js"></script>
    <script src="js/app.js"></script>
</head>

<body>
    <a-scene>
        <a-assets>
            <a-asset-item id="anno-dae" src="src/anno.dae"></a-asset-item>
            <a-asset-item id="rina-dae" src="src/rina.dae"></a-asset-item>
            <img src="src/bg.jpg" alt="room" id="bg">
            <video src="src/movie.mp4" id="movie" autoplay="false" preload="auto"></video>
        </a-assets>

        <a-collada-model src="#rina-dae" scale="0.01 0.01 0.01" position="3 -6 -10" rotation="0 -180 0" >
            <a-animation attribute="rotation" dur="10000" fill="forwards" to="0 180 0" repeat="indefinite"></a-animation>
        </a-collada-model>
        <a-collada-model src="#anno-dae" scale="0.01 0.01 0.01" position="-3 -6 -10" rotation="0 -180 0">
            <a-animation attribute="rotation" dur="10000" fill="forwards" to="0 180 0" repeat="indefinite"></a-animation>
        </a-collada-model>

        <a-sphere id="link-sphere" class="link" color="blue" position="0 4 -10" start-movie="
                on:click; 
                targetMovie: #movie;
                targetSphere: #videosphere;"></a-sphere>
        <a-sky src="#bg" rotation="0 -45 0"></a-sky>
        <!-- <a-light type="point" color="#333" intensity="0.6" position="0 5 0"></a-light> -->
        <a-light type="ambient" intensity="0.6" color="#AAA"></a-light>
        <a-circle 
            id="back" 
            class="link" 
            radius="1" 
            scale="0.1 0.1 0.1" 
            rotation="-90 0 0" 
            position="0 0.7 0" 
            color="black" 
            opacity="12" 
            stop-movie="                
                on:click; 
                targetMovie: #movie;
                targetSphere: #videosphere;"
        ></a-circle>
        <a-camera>
            <a-ring
                id="ring"
                cursor="fuse:true; fuseTimeout: 3000"
                position="0 0 -2"
                radius-inner="0.05"; 
                radius-outer="0.15";
                theta-start= "0";
                theta-length= "360";
                color= "lightblue";
                opacity="0.6"
                rotation = "0 0 90"
                raycaster="objects: .link;">
                <a-animation 
                    begin="cursor-fusing" 
                    easing="linear" 
                    attribute="theta-length" 
                    fill="backwards" 
                    from="0" 
                    to="360" 
                    dur="3000"
                    direction="reverse"
                ></a-animation>
                <a-animation 
                    begin="mouseleave" 
                    easing="ease-in" 
                    attribute="theta-length" 
                    to="360" 
                    dur="1"
                ></a-animation>
            </a-ring>
        </a-camera>
        <a-videosphere id="videosphere" src="#movie" radius="1" rotation="0 260 0" position="0 1.6 0" opacity="0"></a-videosphere>
    </a-scene>
</body>
<script>
    var m = document.getElementById("movie");

    // m.addEventListener("loadstart", function (e) {
    //     console.log("load started");
    // }) 

    // m.addEventListener("progress", function (e) {
    //     console.log(e);
    // }) 

    m.addEventListener("loadeddata", function (e) {console.log("load completed");});
    
</script>

</html>
